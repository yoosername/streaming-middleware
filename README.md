[![Build Status](https://travis-ci.org/yoosername/streaming-middleware.svg?branch=master)](https://travis-ci.org/yoosername/streaming-middleware)

# streaming-middleware

Compose a chain of Transform Streams with Express-like middleware.

## Installation

```bash
npm install
```

## Usage

app.js

```javascript
var StreamingMiddleware = require("../StreamingMiddleware.js");
var app = StreamingMiddleware();

app
  .use(function Uppercase(chunk, enc, next){
    next(null, chunk.toString().toUpperCase() );
  })
  .use(function Reverse(chunk, enc, next){
    next(null, chunk.toString().split("").reverse().join("").trim("") + "\n" );
  })

process.stdin.pipe(app.stream()).pipe(process.stdout);
```

```bash
echo "pickle rick" | node app.js      // # KCIR ELKCIP
```

## Test

```bash
npm test

# or
npm install -g mocha
mocha test/**/*spec.js --reporter spec
# or
mocha test/**/*spec.js --reporter=nyan
```

## Coverage

```bash
npm coverage
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### StreamingMiddleware

Transform stream middleware builder

Returns **[StreamingMiddleware](#streamingmiddleware)** 

#### use

Add a single Transform middleware function to the stack

-   can be chained for ease of use

**Parameters**

-   `fn`  
-   `null-null` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** An instanceof {Transform} or a plain Function with 3 args

Returns **[StreamingMiddleware](#streamingmiddleware)** 

#### stream

Return a Duplex stream where you write to the first Transform middleware and read from the last

-   can be chained for ease of use

**Parameters**

-   `options`  
-   `Object`  options - optional stream object e.g. {objectMode:true}

Returns **DuplexStream** 

## More Examples

See [more examples in the Example folder](https://github.com/yoosername/streaming-middleware/blob/master/examples/EXAMPLES.md)

## Why

-   Experimenting with creating an easily extendable CLI for processing streamed data
-   Experimenting with a test driven approach
