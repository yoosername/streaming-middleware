[![Build Status](https://travis-ci.org/yoosername/streaming-middleware.svg?branch=master)](https://travis-ci.org/yoosername/streaming-middleware)

# streaming-middleware

Compose a chain of Transform Streams with Express-like middleware.

## Installation

```bash
npm install
```

## Usage

app.js

```javascript
var StreamingMiddleware = require("../StreamingMiddleware.js");
var app = StreamingMiddleware();

app
  .use(function Uppercase(chunk, enc, next){
    next(null, chunk.toString().toUpperCase() );
  })
  .use(function Reverse(chunk, enc, next){
    next(null, chunk.toString().split("").reverse().join("").trim("") + "\n" );
  })

process.stdin.pipe(app.stream()).pipe(process.stdout);
```

```bash
echo "pickle rick" | node app.js      // # KCIR ELKCIP
```

## Test

```bash
npm test

# or
npm install -g mocha
mocha test/**/*spec.js --reporter spec
# or
mocha test/**/*spec.js --reporter=nyan
```

## Coverage

```bash
npm coverage
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### GetFunctionArguments

Function which returns array of parsed function args

**Parameters**

-   `fn` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** Function to test for arguments

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)**

### MiddlewareChainedStream

Create a Duplex Stream from a chain of multiple Transform streams

**Parameters**

-   `options`  
-   `stack`  
-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** custom stream options e.g. {objectMode: true}
-   `stk` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** Array of {Function}s making up the overall transform stream

Returns **[MiddlewareChainedStream](#middlewarechainedstream)**

### TransformStreamWrapper

create a stream.TransformStream from a standard function

**Parameters**

-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** options for transform e.g. {objectMode: true}
-   `fn` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** function which will handle the data

Returns **stream.TransformStream**

## More Examples

See [more examples in the Example folder](https://github.com/yoosername/streaming-middleware/blob/master/examples/EXAMPLES.md)

## Why

-   Experimenting with creating an easily extendable CLI for processing streamed data
-   Experimenting with a test driven approach
